<div class="user-list-wrapper">
    <mat-card class="user-list-card">

        <!-- HEADER AND ACTION BAR -->
        <div class="header-actions">
            <div class="title-group">
                <mat-icon class="title-icon">people_alt</mat-icon>
                <div class="title-text">
                    <h2>User Management</h2>
                    <p class="subtitle">View, edit, and onboard new users in the application.</p>
                </div>
            </div>

            <!-- ADD NEW USER BUTTON -->
            <button mat-raised-button color="primary" class="add-user-button" (click)="onAddNewUser()">
                <mat-icon>person_add</mat-icon>
                Add New User
            </button>
        </div>

        <mat-divider></mat-divider>

        <!-- USER DATA TABLE -->
        <cdk-virtual-scroll-viewport itemSize="40" (scrolledIndexChange)="getUsersList($event)"
            class="table-container viewport">
            <table mat-table [dataSource]="dataSource" class="full-width-table">
                <!-- S.NO -->
                <ng-container matColumnDef="sno">
                    <th mat-header-cell *matHeaderCellDef> S.NO </th>
                    <td mat-cell *matCellDef="let user; let i = index"> {{ i + 1 }} </td>
                </ng-container>

                <!-- 1. Full Name Column -->
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef> Name </th>
                    <td mat-cell *matCellDef="let user"> {{ user.name }} </td>
                </ng-container>

                <!-- 2. Email Column -->
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef> Email </th>
                    <td mat-cell *matCellDef="let user"> {{ user.email }} </td>
                </ng-container>

                <!-- 3. Contact Column -->
                <ng-container matColumnDef="phone_number">
                    <th mat-header-cell *matHeaderCellDef> Contact </th>
                    <td mat-cell *matCellDef="let user"> {{ user.phone_number }} </td>
                </ng-container>

                <!-- 4. User Type Column -->
                <ng-container matColumnDef="user_type">
                    <th mat-header-cell *matHeaderCellDef> Type </th>
                    <td mat-cell *matCellDef="let user">
                        <span class="user-type-tag" [ngClass]="{'admin': user.user_type === 'admin'}">
                            {{ user.user_type }}
                        </span>
                    </td>
                </ng-container>

                <!-- 5. Status Column (with Chip style) -->
                <ng-container matColumnDef="address">
                    <th mat-header-cell *matHeaderCellDef> Address </th>
                    <td mat-cell *matCellDef="let user">
                        <span class="status-chip">
                            {{ user.address }}
                        </span>
                    </td>
                </ng-container>

                <!-- 6. Actions Column -->
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef class="action-cell"> Actions </th>
                    <td mat-cell *matCellDef="let user" class="action-cell">
                        <button mat-icon-button color="accent" (click)="onEditUser(user)" title="Edit User">
                            <mat-icon>edit</mat-icon>
                        </button>
                    </td>
                </ng-container>

                <!-- Table Rows -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="data-row"></tr>

                <!-- Row shown when there is no data -->
                <tr class="mat-row empty-row" *matNoDataRow>
                    <td class="mat-cell" colspan="6">No users found matching the filter.</td>
                </tr>
            </table>

            <!-- <div appInfiniteScroll (loadMore)="getUsersList()" style="height: 1px">
            </div> -->
            <!-- Paginator (if you have more than 10 users) -->
            <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator> -->

        </cdk-virtual-scroll-viewport>
    </mat-card>
</div>